# 데이터베이스 저장 프로시져(Stored Procedure)

---

### 저장 프로시져 정의

일련의 쿼리를 마치 하나의 함수처럼 실행하기 위한 쿼리의 집합.

하나의 쿼리문으로 원하는 결과를 얻을 수 없는 경우 → 원하는 결과를 얻기 위해 사용할 여러 줄의 쿼리문을 한번의 요청으로 실행하도록 해줌.

인자값만 상황에 따라 바뀌고 동일한 로직이 중복되는 경우 → 중복 로직을 저장해두고, 인자값만 변경하면서 사용.

---

### 프로시져 장점

**최적화 & 캐시**

프로시져의 최초 실행시 최적화 상태로 컴파일되며, 이후 프로시져 캐시에 저장됨.

따라서 해당 프로세스가 여러번 사용될 때, 다시 컴파일 작업을 거치지 않고 캐시에서 가져올 수 있음.
</br></br>

**유지 보수**

작업이 변경될 때, 다른 작업은 건드리지 않고 프로시저 내부에서 수정만 하면 됨.

- 단점으로 작용할 수도 있음.
</br></br>

**트래픽 감소**

SQL문이 이미 서버에 저장되어 있기 때문에 클라이언트와 서버 간 네트워크 상 트래픽이 감소됨.
</br></br>

**보안**

프로시져 내에서 참조 중인 테이블의 접근을 막을 수 있음.

---

### 프로시져 단점

**호환성**

구문 규칙이 SQL/PSM 표준과의 호환성이 낮기 때문에 코드 자산으로의 재사용성이 나쁨.
</br></br>

**성능**

문자 또는 숫자 연산에서 프로그래밍 언어인 C 또는 Java보다 성능이 느림.
</br></br>

**디버깅**

에러 발생시 어디서 잘못됐는지 디버깅하기가 힘들 수 있음.
